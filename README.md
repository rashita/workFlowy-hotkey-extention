# 🚀 WorkFlowy Custom Shortcuts for Firefox

この拡張機能は、WorkFlowyでカスタムの複雑な操作をシンプルなショートカットキーで実行可能にし、日々のタスク管理の効率を向上させます。

---

## 🌟 機能 (Features)

この拡張機能は、WorkFlowyの操作を効率化するために以下のカスタム機能を提供します。

* **⚡️ 新しい親項目作成と移動機能:**
    * 選択された一つまたは複数のアイテムを囲むように、その直前に空の新しい親項目を作成します。
    * 選択されたアイテム群は、直ちに新しい親項目の子要素として移動します。
    * 処理後、カーソルは新しい親項目の先頭に移動し、即座に名前の編集を開始できます。
* **↩️ 特定の親子移動と展開/折りたたみ:**
    * （元のコードに基づき）アイテムの展開・折りたたみ、親アイテムへのズームアウトなど、WorkFlowyのネイティブAPIを使用した複雑な操作を実行します。

---

## 💻 インストール方法 (Installation)

この拡張機能は、現在テスト・開発段階にあるため、ファイルから一時的に読み込む方法（またはAMOで署名されたファイルを使用する方法）でのインストールが必要です。

### A. 開発者向け: 一時的なアドオンとして読み込む

Firefoxが起動している間のみ拡張機能が動作する開発・テスト用の標準的な方法です。

1.  **ファイルを準備する:**
    * `manifest.json`
    * `content.js`
    * `workflowy-hook.js`
    * これらのファイルを**ルートディレクトリ**に含むZIPファイルを作成します。（または、フォルダのまま使用します。）
2.  **`about:debugging` を開く:**
    * Firefoxのアドレスバーに `about:debugging` と入力し、アクセスします。
3.  **アドオンを読み込む:**
    * 左側のメニューで「**この Firefox**」を選択します。
    * 「**一時的なアドオンを読み込む...**」ボタンをクリックします。
    * 作成した**ZIPファイル**または**フォルダ**を選択します。
4.  **動作確認:** WorkFlowyを開き、ショートカットキーが動作するか確認します。

### B. 一般ユーザー向け: 署名済みファイルからインストール

恒久的にインストールし、再起動後も保持したい場合は、Mozilla Add-ons（AMO）を通じて署名された `.xpi` ファイルが必要です。

* *(署名済みの `.xpi` ファイルを別途提供予定)*

---

## ⌨️ ショートカットキー一覧 (Keyboard Shortcuts)

以下のキーは、WorkFlowyのページがアクティブなときに機能します。

| 操作内容 (Action) | ショートカットキー (Key Combination) |
| :--- | :--- |
| **新しい親項目を作成し、選択項目を移動する** | **`Alt` + `Command` + `[`** |
| アイテムの展開/折りたたみ、親への移動 | `Command` + `→` (ArrowRight) |
| 選択項目を親のトップに移動し、隣接項目を編集 | `Alt` + `Command` + `↑` (ArrowUp) |

### ⚠️ 注意点

* **Mac環境:** `Command` キーを `metaKey` として使用します。
* **Windows環境:** `Command` キーの代わりに `Ctrl` キーを使用する場合、コードの `event.metaKey` 部分を `event.ctrlKey` もしくは `(event.metaKey || event.ctrlKey)` に変更する必要があります。

---

## 🔨 技術的な詳細 (Technical Details)

本拡張機能は、Content Scriptの制約を回避し、WorkFlowyが定義するグローバルオブジェクト (`WF`) にアクセスするために、**Web Accessible Resources** の技術を採用しています。

* `content.js`: 拡張機能のスコープで動作し、`workflowy-hook.js` をページに挿入する役割を担います。
* `workflowy-hook.js`: Work